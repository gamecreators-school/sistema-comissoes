<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Comiss√µes - Game Creators Pro</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --success-gradient: linear-gradient(135deg, #38a169 0%, #2f855a 100%);
            --warning-gradient: linear-gradient(135deg, #ed8936 0%, #dd6b20 100%);
            --danger-gradient: linear-gradient(135deg, #e53e3e 0%, #c53030 100%);
            --info-gradient: linear-gradient(135deg, #3182ce 0%, #2c5282 100%);
            --dark-gradient: linear-gradient(135deg, #1a202c 0%, #2d3748 100%);
            
            --bg-primary: #f7fafc;
            --bg-secondary: #edf2f7;
            --text-primary: #2d3748;
            --text-secondary: #4a5568;
            --border-color: #e2e8f0;
            --shadow-sm: 0 4px 15px rgba(0,0,0,0.1);
            --shadow-lg: 0 20px 60px rgba(0,0,0,0.3);
            --border-radius: 12px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body {
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--primary-gradient);
            min-height: 100vh;
            padding: 10px;
            color: var(--text-primary);
        }

        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .login-card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: var(--shadow-lg);
            width: 100%;
            max-width: 420px;
            text-align: center;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .login-card h1 {
            color: var(--text-primary);
            margin-bottom: 10px;
            font-size: 32px;
            font-weight: 700;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .login-subtitle {
            color: var(--text-secondary);
            margin-bottom: 30px;
            font-size: 14px;
            font-weight: 500;
        }

        .main-container {
            background: white;
            border-radius: 20px;
            box-shadow: var(--shadow-lg);
            overflow: hidden;
            margin: 0 auto;
            max-width: 100%;
            display: none;
            backdrop-filter: blur(20px);
        }

        .page-header {
            background: var(--dark-gradient);
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .page-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 20"><defs><radialGradient id="a" cx="50%" cy="0%" r="100%"><stop offset="0%" stop-color="rgba(255,255,255,0.1)"/><stop offset="100%" stop-color="rgba(255,255,255,0)"/></radialGradient></defs><rect width="100" height="20" fill="url(%23a)"/></svg>');
            pointer-events: none;
        }

        .header-content {
            position: relative;
            z-index: 1;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 20px;
            position: relative;
            z-index: 1;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--success-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
            color: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .user-details h3 {
            font-size: 18px;
            margin-bottom: 4px;
            font-weight: 600;
        }

        .user-level, .unit-badge, .sync-status {
            font-size: 12px;
            opacity: 0.9;
            margin-bottom: 2px;
        }

        .unit-badge {
            background: rgba(255,255,255,0.2);
            padding: 4px 12px;
            border-radius: 20px;
            display: inline-block;
            margin-top: 4px;
        }

        .sync-status {
            display: flex;
            align-items: center;
            gap: 6px;
            margin-top: 4px;
        }

        .logout-btn {
            background: rgba(255,255,255,0.15);
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: var(--transition);
            backdrop-filter: blur(10px);
        }

        .logout-btn:hover {
            background: rgba(255,255,255,0.25);
            border-color: rgba(255,255,255,0.5);
            transform: translateY(-2px);
        }

        .nav-tabs {
            background: var(--bg-primary);
            padding: 0;
            display: flex;
            border-bottom: 2px solid var(--border-color);
            flex-wrap: wrap;
            overflow-x: auto;
        }

        .tab-button {
            background: none;
            border: none;
            padding: 18px 24px;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-secondary);
            transition: var(--transition);
            border-bottom: 3px solid transparent;
            font-size: 14px;
            white-space: nowrap;
            position: relative;
        }

        .tab-button.active {
            color: #667eea;
            border-bottom-color: #667eea;
            background: white;
        }

        .tab-button:hover {
            background: linear-gradient(135deg, #e6fffa, #f0fff4);
            color: #38a169;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            padding: 30px;
        }

        .stat-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 30px;
            box-shadow: var(--shadow-sm);
            border-left: 5px solid #38a169;
            position: relative;
            overflow: hidden;
            transition: var(--transition);
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.15);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, rgba(56,161,105,0.08), rgba(104,211,145,0.08));
            border-radius: 50%;
            transform: translate(40px, -40px);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        .stat-icon {
            font-size: 28px;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
        }

        .stat-value {
            font-size: 36px;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 8px;
            position: relative;
            z-index: 1;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }

        .conversion-card {
            border-left-color: #ed8936;
        }

        .conversion-rate {
            font-size: 28px;
            font-weight: 800;
            color: #ed8936;
            margin-bottom: 8px;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: var(--bg-secondary);
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 10px;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: var(--success-gradient);
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 8px;
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shine 2s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-text {
            font-size: 12px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-primary);
            font-weight: 600;
            font-size: 14px;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 14px;
            transition: var(--transition);
            background: white;
            font-family: inherit;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 14px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            font-family: inherit;
        }

        .btn-primary {
            background: var(--primary-gradient);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-success {
            background: var(--success-gradient);
            color: white;
            box-shadow: 0 4px 15px rgba(56, 161, 105, 0.3);
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(56, 161, 105, 0.4);
        }

        .btn-danger {
            background: var(--danger-gradient);
            color: white;
            box-shadow: 0 4px 15px rgba(229, 62, 62, 0.3);
        }

        .btn-warning {
            background: var(--warning-gradient);
            color: white;
            box-shadow: 0 4px 15px rgba(237, 137, 54, 0.3);
        }

        .btn-info {
            background: var(--info-gradient);
            color: white;
            box-shadow: 0 4px 15px rgba(49, 130, 206, 0.3);
        }

        .quick-actions {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .notification {
            padding: 16px 20px;
            border-radius: 12px;
            margin: 20px 0;
            font-weight: 600;
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            max-width: 420px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.2);
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .notification.success {
            background: linear-gradient(135deg, rgba(199, 246, 213, 0.95), rgba(240, 253, 244, 0.95));
            color: #22543d;
            border-left: 4px solid #38a169;
        }

        .notification.error {
            background: linear-gradient(135deg, rgba(254, 215, 215, 0.95), rgba(255, 245, 245, 0.95));
            color: #742a2a;
            border-left: 4px solid #e53e3e;
        }

        .notification.warning {
            background: linear-gradient(135deg, rgba(254, 245, 231, 0.95), rgba(255, 251, 235, 0.95));
            color: #744210;
            border-left: 4px solid #ed8936;
        }

        .notification.info {
            background: linear-gradient(135deg, rgba(190, 227, 248, 0.95), rgba(235, 248, 255, 0.95));
            color: #2c5282;
            border-left: 4px solid #3182ce;
        }

        .hidden {
            display: none !important;
        }

        /* Tabelas aprimoradas */
        .data-table {
            width: 100%;
            background: white;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            margin-top: 20px;
        }

        .data-table th {
            background: var(--dark-gradient);
            color: white;
            padding: 20px 16px;
            text-align: left;
            font-weight: 600;
            font-size: 14px;
        }

        .data-table td {
            padding: 16px;
            border-bottom: 1px solid var(--border-color);
            font-size: 14px;
        }

        .data-table tr:hover {
            background: var(--bg-primary);
        }

        .data-table tr:last-child td {
            border-bottom: none;
        }

        /* Badges e status */
        .badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
        }

        .badge.success { background: rgba(56, 161, 105, 0.1); color: #38a169; }
        .badge.warning { background: rgba(237, 137, 54, 0.1); color: #ed8936; }
        .badge.error { background: rgba(229, 62, 62, 0.1); color: #e53e3e; }
        .badge.info { background: rgba(49, 130, 206, 0.1); color: #3182ce; }

        /* Loading states */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            backdrop-filter: blur(5px);
        }

        .loading-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            box-shadow: var(--shadow-lg);
            min-width: 300px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsividade aprimorada */
        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
                padding: 20px;
                gap: 20px;
            }
            
            .nav-tabs {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
            
            .tab-button {
                min-width: 140px;
                padding: 16px 20px;
            }

            .user-info {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }

            .page-header {
                padding: 20px;
                flex-direction: column;
                gap: 20px;
            }

            .stat-card {
                padding: 25px;
            }

            .notification {
                max-width: calc(100vw - 40px);
                right: 20px;
                left: 20px;
            }
        }

        @media (max-width: 480px) {
            .login-card {
                padding: 30px 25px;
                margin: 20px;
            }

            .btn {
                padding: 12px 20px;
                font-size: 13px;
            }

            .quick-actions {
                flex-direction: column;
            }

            .quick-actions .btn {
                width: 100%;
                justify-content: center;
            }
        }

        /* Anima√ß√µes de entrada */
        .animate-in {
            animation: slideInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Dark mode para algumas se√ß√µes */
        .dark-section {
            background: var(--dark-gradient);
            color: white;
            border-radius: var(--border-radius);
            padding: 30px;
            margin: 20px;
        }

        .dark-section .stat-card {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
        }
    </style>
</head>
<body>
    <!-- Tela de Login Aprimorada -->
    <div id="loginScreen" class="login-container">
        <div class="login-card animate-in">
            <h1>üéÆ Game Creators</h1>
            <p class="login-subtitle">Sistema Avan√ßado de Comiss√µes e Gamifica√ß√£o</p>
            <div class="form-group">
                <label>üë§ Usu√°rio:</label>
                <input type="text" id="loginUsername" placeholder="Digite seu usu√°rio" autocomplete="username">
            </div>
            <div class="form-group">
                <label>üîí Senha:</label>
                <input type="password" id="loginPassword" placeholder="Digite sua senha" autocomplete="current-password">
            </div>
            <button class="btn btn-primary" onclick="login()" style="width: 100%; margin-top: 25px;">
                üöÄ Entrar no Sistema
            </button>
            <div id="loginError" class="notification error hidden" style="position: relative; margin-top: 20px;">
                Usu√°rio ou senha incorretos!
            </div>
        </div>
    </div>

    <!-- Sistema Principal Aprimorado -->
    <div id="mainSystem" class="main-container">
        <!-- Header com Info do Usu√°rio -->
        <div class="page-header">
            <div class="header-content">
                <h1 id="headerTitle">üéÆ Game Creators Pro</h1>
                <p style="font-size: 14px; opacity: 0.8; margin-top: 4px;">Sistema Avan√ßado de Gest√£o e Gamifica√ß√£o</p>
            </div>
            <div class="user-info">
                <div class="user-avatar" id="userAvatar">A</div>
                <div class="user-details">
                    <h3 id="userName">Usu√°rio</h3>
                    <div class="user-level" id="userLevel">N√≠vel 1 - Iniciante</div>
                    <div class="unit-badge" id="userUnit">Shopping Conjunto Nacional</div>
                    <div class="sync-status" id="syncStatus">
                        <span id="syncIcon">üü¢</span>
                        <span id="syncText">Online</span>
                    </div>
                </div>
                <button class="logout-btn" onclick="logout()">üö™ Sair</button>
            </div>
        </div>

        <!-- Filtro de Unidade (apenas para admins) -->
        <div id="unitFilter" class="hidden" style="background: var(--bg-primary); padding: 20px; text-align: center;">
            <strong>üè¢ Filtrar por Unidade:</strong>
            <div id="unitSelectors" style="margin-top: 15px;">
                <!-- Preenchido dinamicamente -->
            </div>
        </div>

        <!-- Navega√ß√£o Aprimorada -->
        <div class="nav-tabs" id="navTabs">
            <!-- Preenchido dinamicamente -->
        </div>

        <!-- Dashboard Principal -->
        <div id="dashboard" class="tab-content active">
            <div class="dashboard-grid" id="dashboardGrid">
                <!-- Preenchido dinamicamente -->
            </div>
        </div>

        <!-- Outras abas mantidas do c√≥digo original mas com estilos aprimorados -->
        <div id="gamificacao" class="tab-content">
            <div style="padding: 30px;">
                <div class="stat-card">
                    <h3>üéÆ Meu Progresso Gamer</h3>
                    <div id="userProgress">
                        <!-- Preenchido dinamicamente -->
                    </div>
                </div>

                <div class="stat-card" style="margin-top: 25px;">
                    <h3>üéØ Miss√µes Ativas</h3>
                    <div id="activeMissions">
                        <!-- Preenchido dinamicamente -->
                    </div>
                </div>

                <div class="stat-card" style="margin-top: 25px;">
                    <h3>üèÜ Hall da Fama</h3>
                    <div id="userAchievements">
                        <!-- Preenchido dinamicamente -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Outras se√ß√µes mantidas com melhorias visuais -->
        <div id="visitas" class="tab-content">
            <div class="dark-section">
                <h3>üë• Central de Visitas - <span id="visitsUnitName">Shopping Conjunto Nacional</span></h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-top: 20px;">
                    <div class="form-group">
                        <label>üìÖ Data da Visita:</label>
                        <input type="date" id="visitDate" required>
                    </div>
                    <div class="form-group">
                        <label>üë§ Nome do Visitante:</label>
                        <input type="text" id="visitName" placeholder="Nome completo" required>
                    </div>
                    <div class="form-group">
                        <label>üì± Telefone:</label>
                        <input type="tel" id="visitPhone" placeholder="(11) 99999-9999" required>
                    </div>
                    <div class="form-group">
                        <label>üéì Curso de Interesse:</label>
                        <select id="visitCourse" required>
                            <option value="">Selecione...</option>
                            <option value="Creators 2D">Creators 2D</option>
                            <option value="Creators 3D">Creators 3D</option>
                            <option value="Design Gr√°fico e Edi√ß√£o">Design Gr√°fico e Edi√ß√£o</option>
                            <option value="Creators Dev">Creators Dev</option>
                            <option value="Jogos Digitais T√©cnico">Jogos Digitais T√©cnico</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>üë®‚Äçüíº Atendido por:</label>
                        <select id="visitAttendant" required>
                            <option value="">Selecione...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>üìù Observa√ß√µes:</label>
                        <input type="text" id="visitNotes" placeholder="Ex: Muito interessado, vai decidir em 3 dias...">
                    </div>
                </div>
                
                <div class="quick-actions">
                    <button class="btn btn-success" onclick="addVisit()">‚ú® Registrar Visita</button>
                    <button class="btn btn-warning" onclick="convertVisitToMatricula()">üéØ Converter em Matr√≠cula</button>
                </div>
            </div>
            
            <div style="padding: 30px;">
                <div class="stat-card">
                    <h3>üìä Dashboard de Convers√£o - <span id="conversionMonthYear">Dezembro 2024</span></h3>
                    <div id="conversionMetrics">
                        <!-- Preenchido dinamicamente -->
                    </div>
                </div>
                
                <div class="stat-card" style="margin-top: 25px;">
                    <h3>üìã Hist√≥rico de Visitas</h3>
                    <div id="recentVisits" style="max-height: 350px; overflow-y: auto;">
                        <!-- Preenchido dinamicamente -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Ranking -->
        <div id="ranking" class="tab-content">
            <div style="padding: 30px;">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>üèÜ Ranking</th>
                            <th>üë§ Nome</th>
                            <th>üè¢ Unidade</th>
                            <th>üíº Cargo</th>
                            <th>üë• Visitas</th>
                            <th>üìä Matr√≠culas</th>
                            <th>üìà Convers√£o</th>
                            <th>üí∞ Comiss√£o</th>
                            <th>‚≠ê Experi√™ncia</th>
                        </tr>
                    </thead>
                    <tbody id="rankingBody">
                        <!-- Preenchido dinamicamente -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Outras se√ß√µes mantidas do c√≥digo original -->
    </div>

    <script>
        // JavaScript do sistema original mantido com melhorias
        let GOOGLE_APPS_SCRIPT_URL = localStorage.getItem('googleScriptUrl') || '';
        let currentUser = null;
        let selectedUnit = 'all';
        let users = {};
        let matriculas = [];
        let visitas = [];
        let userStats = {};
        let missions = [];
        let achievements = [];
        let metas = {};
        let isOnline = navigator.onLine;

        // Usu√°rios padr√£o aprimorados
        const defaultUsers = {
            'admin@gamecreatorsadm.com': { 
                name: 'Administrador Supremo', 
                username: 'admin@gamecreatorsadm.com', 
                password: '15212602', 
                role: 'admin', 
                level: 15, 
                xp: 10000,
                unit: 'Todas as Unidades'
            },
            'gerente.nacional@gamecreatorsadm.com': {
                name: 'Maria Silva',
                username: 'gerente.nacional@gamecreatorsadm.com',
                password: '123456',
                role: 'gerente',
                level: 8,
                xp: 4500,
                unit: 'Shopping Conjunto Nacional'
            },
            'vendedor1.nacional@gamecreatorsadm.com': {
                name: 'Jo√£o Santos',
                username: 'vendedor1.nacional@gamecreatorsadm.com',
                password: '123456',
                role: 'vendedor',
                level: 5,
                xp: 2200,
                unit: 'Shopping Conjunto Nacional'
            },
            'demo@gamecreatorsadm.com': {
                name: 'Usu√°rio Demo',
                username: 'demo@gamecreatorsadm.com',
                password: 'demo',
                role: 'vendedor',
                level: 3,
                xp: 1500,
                unit: 'Shopping Conjunto Nacional'
            }
        };

        // Tabelas de comiss√µes (mantidas do original)
        const COMISSAO_VENDEDOR = [
            { min: 10, max: 20, valor: 35 },
            { min: 21, max: 30, valor: 50 },
            { min: 31, max: 40, valor: 60 },
            { min: 41, max: 999, valor: 70 }
        ];

        const COMISSAO_GERENTE = [
            { min: 26, max: 52, valor: 50 },
            { min: 53, max: 78, valor: 80 }
        ];

        const COMISSAO_ASSISTENTE = [
            { min: 10, max: 20, valor: 10 },
            { min: 21, max: 30, valor: 15 },
            { min: 31, max: 40, valor: 25 },
            { min: 41, max: 999, valor: 30 }
        ];

        // Sistema de inicializa√ß√£o aprimorado
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Iniciando Game Creators Pro...');
            loadDataFromLocal();
            setCurrentDate();
            setCurrentMonthForReport();
            setupNetworkMonitoring();
            
            // Configurar eventos de teclado para login
            setupLoginEvents();
            
            // Aplicar formata√ß√£o de telefone
            setupPhoneFormatting();
            
            console.log('‚úÖ Sistema inicializado com sucesso!');
        });

        function setupLoginEvents() {
            const loginUsername = document.getElementById('loginUsername');
            const loginPassword = document.getElementById('loginPassword');
            
            if (loginUsername) {
                loginUsername.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        document.getElementById('loginPassword').focus();
                    }
                });
            }
            
            if (loginPassword) {
                loginPassword.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        login();
                    }
                });
            }
        }

        function setupPhoneFormatting() {
            document.addEventListener('input', function(e) {
                if (e.target.type === 'tel') {
                    formatPhone(e.target);
                }
            });
        }

        function formatPhone(input) {
            let value = input.value.replace(/\D/g, '');
            
            if (value.length <= 11) {
                if (value.length <= 10) {
                    value = value.replace(/(\d{2})(\d{4})(\d{4})/, '($1) $2-$3');
                } else {
                    value = value.replace(/(\d{2})(\d{5})(\d{4})/, '($1) $2-$3');
                }
            }
            
            input.value = value;
        }

        // Sistema de Login aprimorado
        function login() {
            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;
            const errorDiv = document.getElementById('loginError');

            if (!username || !password) {
                showNotification('Por favor, preencha todos os campos!', 'error');
                return;
            }

            if (users[username] && users[username].password === password) {
                currentUser = users[username];
                
                // Anima√ß√£o de transi√ß√£o suave
                document.getElementById('loginScreen').style.animation = 'fadeOut 0.5s ease-out';
                
                setTimeout(() => {
                    document.getElementById('loginScreen').style.display = 'none';
                    document.getElementById('mainSystem').style.display = 'block';
                    document.getElementById('mainSystem').style.animation = 'fadeIn 0.5s ease-in';
                    
                    setupUserInterface();
                    showNotification(`üéâ Bem-vindo(a), ${currentUser.name}!`, 'success');
                }, 500);
                
                errorDiv.classList.add('hidden');
            } else {
                errorDiv.classList.remove('hidden');
                showNotification('Credenciais inv√°lidas!', 'error');
            }
        }

        function logout() {
            currentUser = null;
            selectedUnit = 'all';
            
            document.getElementById('mainSystem').style.animation = 'fadeOut 0.5s ease-out';
            
            setTimeout(() => {
                document.getElementById('loginScreen').style.display = 'flex';
                document.getElementById('mainSystem').style.display = 'none';
                document.getElementById('loginScreen').style.animation = 'fadeIn 0.5s ease-in';
                
                document.getElementById('loginUsername').value = '';
                document.getElementById('loginPassword').value = '';
                
                showNotification('Logout realizado com sucesso!', 'info');
            }, 500);
        }

        // Sistema de notifica√ß√µes aprimorado
        function showNotification(message, type = 'info', duration = 4000) {
            // Remove notifica√ß√µes existentes
            const existingNotifications = document.querySelectorAll('.notification');
            existingNotifications.forEach(notif => {
                if (notif.style.position === 'fixed') {
                    notif.remove();
                }
            });

            // Cria nova notifica√ß√£o
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 10px;">
                    <span style="font-size: 18px;">
                        ${type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : type === 'warning' ? '‚ö†Ô∏è' : '‚ÑπÔ∏è'}
                    </span>
                    <span>${message}</span>
                </div>
            `;

            document.body.appendChild(notification);

            // Remove automaticamente
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.style.animation = 'slideOut 0.3s ease-in';
                    setTimeout(() => notification.remove(), 300);
                }
            }, duration);
        }

        // Interface do usu√°rio aprimorada
        function setupUserInterface() {
            document.getElementById('userAvatar').textContent = currentUser.name.charAt(0).toUpperCase();
            document.getElementById('userName').textContent = currentUser.name;
            document.getElementById('userLevel').textContent = `N√≠vel ${currentUser.level} - ${getLevelTitle(currentUser.level)}`;
            document.getElementById('userUnit').textContent = currentUser.unit || 'Shopping Conjunto Nacional';

            updateSyncStatus('online');

            if (currentUser.role === 'admin') {
                document.getElementById('unitFilter').classList.remove('hidden');
                setupUnitFilter();
            }

            setupNavigation();
            setupDashboard();
            updateUserSelects();
            updateVisitSelects();
            
            // Carregar dados se estiver offline
            loadDataFromLocal();
        }

        function getLevelTitle(level) {
            if (level >= 15) return 'Lenda Suprema';
            if (level >= 12) return 'Mestre Absoluto';
            if (level >= 10) return 'Grande Mestre';
            if (level >= 8) return 'Especialista Elite';
            if (level >= 6) return 'Profissional';
            if (level >= 4) return 'Experiente';
            if (level >= 2) return 'Aprendiz';
            return 'Novato';
        }

        function setupNavigation() {
            const navTabs = document.getElementById('navTabs');
            let tabs = '';

            tabs += '<button class="tab-button active" onclick="showTab(\'dashboard\')">üè† Dashboard</button>';
            tabs += '<button class="tab-button" onclick="showTab(\'gamificacao\')">üéÆ Gamifica√ß√£o</button>';
            
            if (['admin', 'gerente', 'vendedor', 'assistente'].includes(currentUser.role)) {
                tabs += '<button class="tab-button" onclick="showTab(\'visitas\')">üë• Visitas</button>';
            }
            
            tabs += '<button class="tab-button" onclick="showTab(\'ranking\')">üèÜ Ranking</button>';

            if (currentUser.role === 'admin') {
                tabs += '<button class="tab-button" onclick="showTab(\'admin\')">‚öôÔ∏è Admin</button>';
            }

            navTabs.innerHTML = tabs;
        }

        function showTab(tabName) {
            // Ocultar todas as abas
            const allTabs = document.querySelectorAll('.tab-content');
            const allButtons = document.querySelectorAll('.tab-button');
            
            allTabs.forEach(tab => tab.classList.remove('active'));
            allButtons.forEach(btn => btn.classList.remove('active'));
            
            // Mostrar aba selecionada
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            // Atualizar dados espec√≠ficos da aba
            switch(tabName) {
                case 'dashboard':
                    setupDashboard();
                    break;
                case 'gamificacao':
                    updateUserProgress();
                    updateMissionsDisplay();
                    updateAchievementsDisplay();
                    break;
                case 'visitas':
                    updateVisitsDisplay();
                    setCurrentDate();
                    break;
                case 'ranking':
                    updateRanking();
                    break;
            }
        }

        function setupDashboard() {
            const dashboardGrid = document.getElementById('dashboardGrid');
            let dashboardHTML = '';

            if (currentUser.role === 'admin') {
                dashboardHTML += generateAdminDashboard();
            } else if (currentUser.role === 'gerente') {
                dashboardHTML += generateManagerDashboard();
            } else {
                dashboardHTML += generateUserDashboard();
            }

            dashboardGrid.innerHTML = dashboardHTML;
        }

        function generateUserDashboard() {
            // Dados fict√≠cios para demonstra√ß√£o
            return `
                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-icon">üìä</span>
                    </div>
                    <div class="stat-value">12</div>
                    <div class="stat-label">Matr√≠culas do M√™s</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 60%"></div>
                    </div>
                    <div class="progress-text">12 de 20 (Meta)</div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-icon">üë•</span>
                    </div>
                    <div class="stat-value">34</div>
                    <div class="stat-label">Visitas Atendidas</div>
                </div>

                <div class="stat-card conversion-card">
                    <div class="stat-header">
                        <span class="stat-icon">üìà</span>
                    </div>
                    <div class="conversion-rate">35.3%</div>
                    <div class="stat-label">Taxa de Convers√£o</div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-icon">üéØ</span>
                    </div>
                    <div class="stat-value">3</div>
                    <div class="stat-label">Vendas Hoje</div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-icon">üí∞</span>
                    </div>
                    <div class="stat-value">R$ 600</div>
                    <div class="stat-label">Comiss√£o Estimada</div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-icon">‚≠ê</span>
                        <span class="badge success">N√≠vel ${currentUser.level}</span>
                    </div>
                    <div class="stat-value">${currentUser.xp}</div>
                    <div class="stat-label">Pontos de Experi√™ncia</div>
                </div>
            `;
        }

        function generateManagerDashboard() {
            return `
                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-icon">üè¢</span>
                    </div>
                    <div class="stat-value">45</div>
                    <div class="stat-label">Matr√≠culas da Unidade</div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-icon">üë•</span>
                    </div>
                    <div class="stat-value">123</div>
                    <div class="stat-label">Visitas da Equipe</div>
                </div>

                <div class="stat-card conversion-card">
                    <div class="stat-header">
                        <span class="stat-icon">üìà</span>
                    </div>
                    <div class="conversion-rate">36.6%</div>
                    <div class="stat-label">Convers√£o da Unidade</div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-icon">üí∞</span>
                    </div>
                    <div class="stat-value">R$ 2.250</div>
                    <div class="stat-label">Minha Comiss√£o</div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-icon">üíµ</span>
                    </div>
                    <div class="stat-value">R$ 54.500</div>
                    <div class="stat-label">Faturamento da Unidade</div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-icon">üë®‚Äçüíº</span>
                    </div>
                    <div class="stat-value">8</div>
                    <div class="stat-label">Membros da Equipe</div>
                </div>
            `;
        }

        function generateAdminDashboard() {
            return `
                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-icon">üìä</span>
                    </div>
                    <div class="stat-value">87</div>
                    <div class="stat-label">Total de Matr√≠culas</div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-icon">üë•</span>
                    </div>
                    <div class="stat-value">234</div>
                    <div class="stat-label">Total de Visitas</div>
                </div>

                <div class="stat-card conversion-card">
                    <div class="stat-header">
                        <span class="stat-icon">üìà</span>
                    </div>
                    <div class="conversion-rate">37.2%</div>
                    <div class="stat-label">Convers√£o Geral</div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-icon">üí∞</span>
                    </div>
                    <div class="stat-value">R$ 105.600</div>
                    <div class="stat-label">Faturamento Total</div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-icon">üè¢</span>
                    </div>
                    <div class="stat-value">2</div>
                    <div class="stat-label">Unidades Ativas</div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-icon">üë®‚Äçüíº</span>
                    </div>
                    <div class="stat-value">15</div>
                    <div class="stat-label">Colaboradores Ativos</div>
                </div>
            `;
        }

        // Fun√ß√µes do sistema de visitas
        function addVisit() {
            const data = document.getElementById('visitDate').value;
            const nome = document.getElementById('visitName').value;
            const telefone = document.getElementById('visitPhone').value;
            const cursoInteresse = document.getElementById('visitCourse').value;
            const atendente = document.getElementById('visitAttendant').value;
            const observacoes = document.getElementById('visitNotes').value;

            if (!data || !nome || !telefone || !cursoInteresse || !atendente) {
                showNotification('Por favor, preencha todos os campos obrigat√≥rios!', 'error');
                return;
            }

            // Simular adi√ß√£o da visita
            showNotification('‚úÖ Visita registrada com sucesso!', 'success');
            clearVisitForm();
            updateVisitsDisplay();
        }

        function clearVisitForm() {
            document.getElementById('visitDate').value = '';
            document.getElementById('visitName').value = '';
            document.getElementById('visitPhone').value = '';
            document.getElementById('visitCourse').value = '';
            document.getElementById('visitNotes').value = '';
        }

        function convertVisitToMatricula() {
            showNotification('Redirecionando para registro de matr√≠cula...', 'info');
            // showTab('matriculas'); // Descomentaria se a aba existisse
        }

        function updateVisitsDisplay() {
            updateConversionMetrics();
            updateRecentVisits();
        }

        function updateConversionMetrics() {
            const conversionMetrics = document.getElementById('conversionMetrics');
            if (!conversionMetrics) return;

            conversionMetrics.innerHTML = `
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                    <div style="text-align: center; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 12px; backdrop-filter: blur(10px);">
                        <div style="font-size: 28px; font-weight: bold; color: white;">34</div>
                        <div style="font-size: 14px; color: rgba(255,255,255,0.8);">Total de Visitas</div>
                    </div>
                    <div style="text-align: center; padding: 20px; background: rgba(56,161,105,0.2); border-radius: 12px; backdrop-filter: blur(10px);">
                        <div style="font-size: 28px; font-weight: bold; color: #38a169;">12</div>
                        <div style="font-size: 14px; color: rgba(255,255,255,0.8);">Convertidas</div>
                    </div>
                    <div style="text-align: center; padding: 20px; background: rgba(237,137,54,0.2); border-radius: 12px; backdrop-filter: blur(10px);">
                        <div style="font-size: 28px; font-weight: bold; color: #ed8936;">35.3%</div>
                        <div style="font-size: 14px; color: rgba(255,255,255,0.8);">Taxa de Convers√£o</div>
                    </div>
                    <div style="text-align: center; padding: 20px; background: rgba(102,126,234,0.2); border-radius: 12px; backdrop-filter: blur(10px);">
                        <div style="font-size: 28px; font-weight: bold; color: #667eea;">22</div>
                        <div style="font-size: 14px; color: rgba(255,255,255,0.8);">Pendentes</div>
                    </div>
                </div>
            `;
        }

        function updateRecentVisits() {
            const recentVisits = document.getElementById('recentVisits');
            if (!recentVisits) return;

            // Dados simulados para demonstra√ß√£o
            const visitasDemo = [
                { nome: 'Ana Silva', data: '2024-12-15', curso: 'Creators 2D', telefone: '(11) 99999-1234', convertido: true },
                { nome: 'Carlos Santos', data: '2024-12-14', curso: 'Creators 3D', telefone: '(11) 99999-5678', convertido: false },
                { nome: 'Maria Oliveira', data: '2024-12-13', curso: 'Design Gr√°fico', telefone: '(11) 99999-9012', convertido: true },
                { nome: 'Jo√£o Pereira', data: '2024-12-12', curso: 'Creators Dev', telefone: '(11) 99999-3456', convertido: false },
            ];

            let html = '';
            visitasDemo.forEach(visita => {
                html += `
                    <div style="border: 1px solid var(--border-color); border-radius: 10px; padding: 20px; margin-bottom: 15px; 
                         ${visita.convertido ? 'background: linear-gradient(135deg, #f0fff4, #e6fffa); border-color: #38a169;' : 'background: white;'}
                         transition: var(--transition);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <strong style="font-size: 16px;">${visita.nome}</strong>
                            <span style="color: ${visita.convertido ? '#38a169' : '#ed8936'}; font-weight: bold; font-size: 14px;">
                                ${visita.convertido ? '‚úÖ Convertido' : '‚è≥ Pendente'}
                            </span>
                        </div>
                        <div style="font-size: 13px; color: var(--text-secondary); margin-bottom: 5px;">
                            üìÖ ${formatDate(visita.data)} ‚Ä¢ üéì ${visita.curso}
                        </div>
                        <div style="font-size: 13px; color: var(--text-secondary);">
                            üì± ${visita.telefone}
                        </div>
                    </div>
                `;
            });
            
            recentVisits.innerHTML = html;
        }

        // Ranking aprimorado
        function updateRanking() {
            const rankingBody = document.getElementById('rankingBody');
            
            // Dados simulados para demonstra√ß√£o
            const rankingData = [
                { pos: 1, nome: 'Maria Silva', unidade: 'Conjunto Nacional', cargo: 'gerente', visitas: 45, matriculas: 18, conversao: 40.0, comissao: 2250, xp: 4500 },
                { pos: 2, nome: 'Jo√£o Santos', unidade: 'Conjunto Nacional', cargo: 'vendedor', visitas: 32, matriculas: 12, conversao: 37.5, comissao: 600, xp: 2200 },
                { pos: 3, nome: 'Ana Costa', unidade: 'JK Shopping', cargo: 'vendedor', visitas: 28, matriculas: 10, conversao: 35.7, comissao: 500, xp: 1800 },
                { pos: 4, nome: 'Carlos Lima', unidade: 'JK Shopping', cargo: 'assistente', visitas: 25, matriculas: 8, conversao: 32.0, comissao: 240, xp: 1200 },
            ];

            let html = '';
            rankingData.forEach(user => {
                const rankClass = user.pos === 1 ? 'badge success' : 
                                user.pos === 2 ? 'badge warning' : 
                                user.pos === 3 ? 'badge info' : 'badge';

                html += `
                    <tr style="transition: var(--transition);">
                        <td style="padding: 16px;">
                            <div style="width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; 
                                 font-weight: bold; font-size: 16px; color: white;
                                 background: ${user.pos === 1 ? 'linear-gradient(135deg, #ffd700, #ffed4e)' : 
                                            user.pos === 2 ? 'linear-gradient(135deg, #c0c0c0, #e2e8f0)' : 
                                            user.pos === 3 ? 'linear-gradient(135deg, #cd7f32, #dd6b20)' : 
                                            'linear-gradient(135deg, #4a5568, #2d3748)'};">
                                ${user.pos}
                            </div>
                        </td>
                        <td style="padding: 16px; font-weight: 600;">${user.nome}</td>
                        <td style="padding: 16px;">${user.unidade}</td>
                        <td style="padding: 16px;"><span class="badge ${user.cargo === 'gerente' ? 'warning' : user.cargo === 'vendedor' ? 'success' : 'info'}">${user.cargo}</span></td>
                        <td style="padding: 16px; text-align: center; font-weight: 600;">${user.visitas}</td>
                        <td style="padding: 16px; text-align: center; font-weight: 600; color: #38a169;">${user.matriculas}</td>
                        <td style="padding: 16px; text-align: center; font-weight: 600; color: #ed8936;">${user.conversao}%</td>
                        <td style="padding: 16px; text-align: right; font-weight: 600;">${formatCurrency(user.comissao)}</td>
                        <td style="padding: 16px; text-align: center;"><span class="badge info">${user.xp} XP</span></td>
                    </tr>
                `;
            });

            rankingBody.innerHTML = html;
        }

        // Fun√ß√µes utilit√°rias
        function formatCurrency(value) {
            return new Intl.NumberFormat('pt-BR', {
                style: 'currency',
                currency: 'BRL'
            }).format(value);
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('pt-BR');
        }

        function setCurrentDate() {
            const today = new Date().toISOString().split('T')[0];
            const visitDateInput = document.getElementById('visitDate');
            
            if (visitDateInput) visitDateInput.value = today;
        }

        function setCurrentMonthForReport() {
            const now = new Date();
            const monthYear = now.toLocaleDateString('pt-BR', { month: 'long', year: 'numeric' });
            const conversionMonthYear = document.getElementById('conversionMonthYear');
            
            if (conversionMonthYear) conversionMonthYear.textContent = monthYear;
        }

        // Sistema de monitoramento de rede
        function setupNetworkMonitoring() {
            window.addEventListener('online', function() {
                isOnline = true;
                updateSyncStatus('online');
                showNotification('üü¢ Conectado! Sistema online.', 'success');
            });

            window.addEventListener('offline', function() {
                isOnline = false;
                updateSyncStatus('offline');
                showNotification('üî¥ Offline. Funcionando localmente.', 'warning');
            });
        }

        function updateSyncStatus(status) {
            const syncIcon = document.getElementById('syncIcon');
            const syncText = document.getElementById('syncText');
            
            if (!syncIcon || !syncText) return;
            
            switch(status) {
                case 'online':
                    syncIcon.textContent = 'üü¢';
                    syncText.textContent = 'Online';
                    break;
                case 'offline':
                    syncIcon.textContent = 'üî¥';
                    syncText.textContent = 'Offline';
                    break;
                case 'syncing':
                    syncIcon.textContent = 'üü°';
                    syncText.textContent = 'Sincronizando...';
                    break;
                case 'error':
                    syncIcon.textContent = '‚ö†Ô∏è';
                    syncText.textContent = 'Erro';
                    break;
            }
        }

        // Carregamento de dados (simulado)
        function loadDataFromLocal() {
            try {
                const savedUsers = localStorage.getItem('gc_users');
                
                if (savedUsers) {
                    users = JSON.parse(savedUsers);
                } else {
                    users = {...defaultUsers};
                    localStorage.setItem('gc_users', JSON.stringify(users));
                }

                console.log('üìä Dados carregados:', Object.keys(users).length, 'usu√°rios');
            } catch (error) {
                console.error('‚ùå Erro ao carregar dados:', error);
                users = {...defaultUsers};
            }
        }

        // Fun√ß√µes de gamifica√ß√£o (simuladas)
        function updateUserProgress() {
            const userProgress = document.getElementById('userProgress');
            if (!userProgress || !currentUser) return;
            
            const nextLevelXP = currentUser.level * 500;
            const currentLevelXP = (currentUser.level - 1) * 500;
            const progressXP = currentUser.xp - currentLevelXP;
            const neededXP = nextLevelXP - currentLevelXP;
            const progressPercent = Math.min((progressXP / neededXP) * 100, 100);
            
            userProgress.innerHTML = `
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                    <div style="text-align: center; padding: 20px; background: var(--bg-primary); border-radius: 12px;">
                        <div style="font-size: 32px; font-weight: bold; color: var(--text-primary);">${currentUser.level}</div>
                        <div style="font-size: 14px; color: var(--text-secondary);">N√≠vel Atual</div>
                    </div>
                    <div style="text-align: center; padding: 20px; background: var(--bg-primary); border-radius: 12px;">
                        <div style="font-size: 32px; font-weight: bold; color: #667eea;">${currentUser.xp}</div>
                        <div style="font-size: 14px; color: var(--text-secondary);">XP Total</div>
                    </div>
                    <div style="text-align: center; padding: 20px; background: var(--bg-primary); border-radius: 12px;">
                        <div style="font-size: 32px; font-weight: bold; color: #38a169;">3</div>
                        <div style="font-size: 14px; color: var(--text-secondary);">Conquistas</div>
                    </div>
                    <div style="padding: 20px; background: var(--bg-primary); border-radius: 12px;">
                        <div style="text-align: center; font-size: 18px; font-weight: bold; color: #ed8936; margin-bottom: 10px;">Pr√≥ximo N√≠vel</div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${progressPercent}%; background: var(--primary-gradient);"></div>
                        </div>
                        <div style="text-align: center; font-size: 12px; color: var(--text-secondary); margin-top: 5px;">${progressXP}/${neededXP} XP</div>
                    </div>
                </div>
            `;
        }

        function updateMissionsDisplay() {
            const activeMissions = document.getElementById('activeMissions');
            if (!activeMissions) return;

            // Miss√µes demo
            const missionsDemo = [
                { title: "üéØ Meta Semanal", description: "Realizar 5 matr√≠culas esta semana", progress: 3, target: 5, reward: 150, deadline: "2024-12-20" },
                { title: "üë• Networking Master", description: "Atender 20 visitas neste m√™s", progress: 15, target: 20, reward: 200, deadline: "2024-12-31" },
                { title: "üìà Alta Convers√£o", description: "Manter convers√£o acima de 40%", progress: 35, target: 40, reward: 300, deadline: "2024-12-31" }
            ];

            let html = '';
            missionsDemo.forEach(mission => {
                const progressPercent = (mission.progress / mission.target) * 100;
                const isCompleted = mission.progress >= mission.target;
                
                html += `
                    <div style="border: 2px solid ${isCompleted ? '#38a169' : '#667eea'}; border-radius: 12px; padding: 20px; margin-bottom: 15px;
                         background: ${isCompleted ? 'linear-gradient(135deg, #f0fff4, #e6fffa)' : 'linear-gradient(135deg, #f7fafc, #edf2f7)'};">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                            <div style="font-weight: bold; font-size: 16px;">${mission.title}</div>
                            <div style="background: ${isCompleted ? '#38a169' : '#667eea'}; color: white; padding: 4px 12px; border-radius: 20px; font-size: 12px;">
                                +${mission.reward} XP
                            </div>
                        </div>
                        <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 15px;">
                            ${mission.description}
                        </div>
                        <div style="margin-bottom: 10px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                <span style="font-size: 12px; font-weight: 600;">Progresso:</span>
                                <span style="font-size: 12px; font-weight: 600;">${mission.progress}/${mission.target}</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${Math.min(progressPercent, 100)}%; 
                                     background: ${isCompleted ? 'var(--success-gradient)' : 'var(--primary-gradient)'};"></div>
                            </div>
                        </div>
                        <div style="font-size: 12px; color: var(--text-secondary);">
                            üìÖ Prazo: ${formatDate(mission.deadline)} ${isCompleted ? ' | ‚úÖ Conclu√≠da!' : ''}
                        </div>
                    </div>
                `;
            });

            activeMissions.innerHTML = html;
        }

        function updateAchievementsDisplay() {
            const userAchievements = document.getElementById('userAchievements');
            if (!userAchievements) return;
            
            const achievementsDemo = [
                { icon: 'üéØ', name: 'Primeira Venda', description: 'Primeira matr√≠cula realizada' },
                { icon: 'üìà', name: 'Vendedor Iniciante', description: 'Alcan√ßou 5 matr√≠culas no m√™s' },
                { icon: 'üë•', name: 'Networking Pro', description: 'Atendeu 25 visitas' }
            ];

            let html = '';
            achievementsDemo.forEach(achievement => {
                html += `
                    <div style="display: inline-block; background: linear-gradient(135deg, #ffd700, #ffed4e); 
                         color: var(--text-primary); padding: 8px 16px; border-radius: 25px; 
                         font-size: 14px; font-weight: 600; margin: 4px; cursor: pointer;
                         transition: var(--transition); box-shadow: 0 2px 8px rgba(255, 215, 0, 0.3);"
                         title="${achievement.description}">
                        ${achievement.icon} ${achievement.name}
                    </div>
                `;
            });
            
            if (achievementsDemo.length === 0) {
                html = '<p style="text-align: center; color: var(--text-secondary); padding: 20px;">Complete miss√µes para desbloquear conquistas!</p>';
            }
            
            userAchievements.innerHTML = html;
        }

        function updateUserSelects() {
            const visitAttendantSelect = document.getElementById('visitAttendant');
            
            if (visitAttendantSelect) {
                visitAttendantSelect.innerHTML = '<option value="">Selecione...</option>';
                
                Object.entries(users).forEach(([username, user]) => {
                    if (user.role !== 'admin') {
                        visitAttendantSelect.innerHTML += `<option value="${user.name}">${user.name} (${user.role})</option>`;
                    }
                });

                if (currentUser.role !== 'admin') {
                    visitAttendantSelect.value = currentUser.name;
                    visitAttendantSelect.disabled = true;
                }
            }
        }

        function updateVisitSelects() {
            updateUserSelects();
        }

        function setupUnitFilter() {
            const unitSelectors = document.getElementById('unitSelectors');
            const units = ['all', 'Shopping Conjunto Nacional', 'JK Shopping'];
            
            let html = '';
            units.forEach(unit => {
                const label = unit === 'all' ? 'Todas as Unidades' : unit;
                const activeClass = selectedUnit === unit ? 'btn btn-primary' : 'btn';
                html += `<button class="${activeClass}" onclick="selectUnit('${unit}')" style="margin: 5px;">${label}</button>`;
            });
            
            unitSelectors.innerHTML = html;
        }

        function selectUnit(unit) {
            selectedUnit = unit;
            setupUnitFilter();
            setupDashboard();
            updateRanking();
            showNotification(`Filtro aplicado: ${unit === 'all' ? 'Todas as Unidades' : unit}`, 'info');
        }

        // CSS adicional para anima√ß√µes
        const additionalCSS = `
            @keyframes fadeOut {
                from { opacity: 1; transform: scale(1); }
                to { opacity: 0; transform: scale(0.95); }
            }
            
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        
        const styleSheet = document.createElement("style");
        styleSheet.textContent = additionalCSS;
        document.head.appendChild(styleSheet);

        console.log('üéÆ Game Creators Pro inicializado com sucesso!');
    </script>
</body>
</html>
